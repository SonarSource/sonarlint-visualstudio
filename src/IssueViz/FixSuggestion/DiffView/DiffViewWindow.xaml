<Window
    x:Class="SonarLint.VisualStudio.IssueVisualization.FixSuggestion.DiffView.DiffViewWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:vsShell="clr-namespace:Microsoft.VisualStudio.Shell;assembly=Microsoft.VisualStudio.Shell.15.0"
    xmlns:res="clr-namespace:SonarLint.VisualStudio.IssueVisualization"
    WindowStartupLocation="CenterOwner"
    Background="{DynamicResource {x:Static vsShell:VsBrushes.WindowKey}}"
    Icon="pack://application:,,,/SonarLint.VisualStudio.IssueVisualization;Component/Commands/Resources/sonarqube_for_ide_logo_16px.png">

    <Grid x:Name="ChangesGrid">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="5"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <Grid Grid.Row="0" x:Name="DiffGrid" Margin="0,10"></Grid>
            
            <GridSplitter Grid.Row="1" HorizontalAlignment="Stretch"/>

            <Grid Grid.Row="2" Margin="5">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <TextBlock Grid.Row="0" Text="{x:Static res:Resources.DiffViewWindow_Description}" FontSize="15" />
                <CheckBox Grid.Row="1" Content="{Binding FileName, Mode=OneWay}" IsChecked="{Binding AllChangesSelected}" Margin="0,10,0,0" FontSize="14"
                          Click="SelectAllCheckbox_IsClicked"/>
                <ListBox Grid.Row="2" Margin="5,5,0,0" ItemsSource="{Binding ChangeViewModels}">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <Grid PreviewMouseLeftButtonUp="ChangeRow_OnMouseLeftButtonUp" Width="{Binding ElementName=DiffGrid, Path=ActualWidth}">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <CheckBox Grid.Column="0" IsChecked="{Binding IsSelected}" VerticalAlignment="Center" Click="IsSelectedCheckbox_OnClick"/>
                                <TextBlock Grid.Column="1" Text="{Binding Before}" VerticalAlignment="Center" TextDecorations="Strikethrough" TextWrapping="NoWrap"
                                           Background="{DynamicResource {x:Static vsShell:VsBrushes.VizSurfaceRedLightKey}}" />
                                <TextBlock Grid.Column="2" Text="{Binding  After}" VerticalAlignment="Center" TextWrapping="NoWrap"
                                           Background="{DynamicResource {x:Static vsShell:VsBrushes.VizSurfaceGreenLightKey}}" /> 
                            </Grid>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </Grid>
        </Grid>

        <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Center">
            <Button Content="{x:Static res:Resources.DiffViewWindow_Apply}" Click="OnAccept" Margin="5" Padding="5" FontSize="15" IsEnabled="{Binding Path=IsApplyEnabled}"/>
            <Button Content="{x:Static res:Resources.DiffViewWindow_Discard}" Click="OnDecline" Margin="5" Padding="5" FontSize="15"/>
        </StackPanel>
    </Grid>

</Window>